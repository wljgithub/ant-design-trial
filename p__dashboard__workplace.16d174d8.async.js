(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8767],{84489:function(y){y.exports={linkGroup:"antd-pro-pages-dashboard-workplace-components-editable-link-group-index-linkGroup"}},51862:function(y){y.exports={radar:"antd-pro-pages-dashboard-workplace-components-radar-index-radar",legend:"antd-pro-pages-dashboard-workplace-components-radar-index-legend",legendItem:"antd-pro-pages-dashboard-workplace-components-radar-index-legendItem",dot:"antd-pro-pages-dashboard-workplace-components-radar-index-dot"}},27322:function(y){y.exports={activitiesList:"antd-pro-pages-dashboard-workplace-style-activitiesList",username:"antd-pro-pages-dashboard-workplace-style-username",event:"antd-pro-pages-dashboard-workplace-style-event",pageHeaderContent:"antd-pro-pages-dashboard-workplace-style-pageHeaderContent",avatar:"antd-pro-pages-dashboard-workplace-style-avatar",content:"antd-pro-pages-dashboard-workplace-style-content",contentTitle:"antd-pro-pages-dashboard-workplace-style-contentTitle",extraContent:"antd-pro-pages-dashboard-workplace-style-extraContent",statItem:"antd-pro-pages-dashboard-workplace-style-statItem",members:"antd-pro-pages-dashboard-workplace-style-members",member:"antd-pro-pages-dashboard-workplace-style-member",projectList:"antd-pro-pages-dashboard-workplace-style-projectList",cardTitle:"antd-pro-pages-dashboard-workplace-style-cardTitle",projectGrid:"antd-pro-pages-dashboard-workplace-style-projectGrid",projectItemContent:"antd-pro-pages-dashboard-workplace-style-projectItemContent",datetime:"antd-pro-pages-dashboard-workplace-style-datetime",activeCard:"antd-pro-pages-dashboard-workplace-style-activeCard"}},931:function(y,$,a){"use strict";a.r($),a.d($,{default:function(){return ce}});var Ee=a(69885),L=a(87379),ye=a(1898),k=a(29024),Ce=a(81766),g=a(7935),Ze=a(48568),F=a(32689),b=a(44950),x=a(92633),I=a(73848),j=a(43649),ke=a(50296),G=a(77326),Ae=a(94039),A=a(24402),Ne=a(9849),W=a(6299),e=a(67294),Z=a(77888),O=a(12700),X=a(16157),J=a(25747),U=a.n(J),E=a(63012),K=a(28053);function H(u){var i=u.style;i.height="100%";var l=parseInt("".concat(getComputedStyle(u).height),10),t=parseInt("".concat(getComputedStyle(u).paddingTop),10)+parseInt("".concat(getComputedStyle(u).paddingBottom),10);return l-t}function B(u){if(!u)return 0;var i=u,l=H(i),t=i.parentNode;return t&&(l=H(t)),l}function Q(){return function(u){var i=function(l){(0,I.Z)(d,l);var t=(0,j.Z)(d);function d(){var o;(0,b.Z)(this,d);for(var n=arguments.length,r=new Array(n),p=0;p<n;p++)r[p]=arguments[p];return o=t.call.apply(t,[this].concat(r)),o.state={computedHeight:0},o.root=void 0,o.handleRoot=function(m){o.root=m},o}return(0,x.Z)(d,[{key:"componentDidMount",value:function(){var n=this.props.height;if(!n){var r=B(this.root);this.setState({computedHeight:r}),r<1&&(r=B(this.root),this.setState({computedHeight:r}))}}},{key:"render",value:function(){var n=this.props.height,r=this.state.computedHeight,p=n||r;return e.createElement("div",{ref:this.handleRoot},p>0&&e.createElement(u,(0,K.Z)({},this.props,{height:p})))}}]),d}(e.Component);return i}}var V=Q,Y=a(51862),N=a.n(Y),q=function(u){(0,I.Z)(l,u);var i=(0,j.Z)(l);function l(){var t;(0,b.Z)(this,l);for(var d=arguments.length,o=new Array(d),n=0;n<d;n++)o[n]=arguments[n];return t=i.call.apply(i,[this].concat(o)),t.state={legendData:[]},t.chart=void 0,t.node=void 0,t.getG2Instance=function(r){t.chart=r},t.getLegendData=function(){if(!!t.chart){var r=t.chart.getAllGeoms()[0];if(!!r){var p=r.get("dataArray")||[],m=p.map(function(h){var v=h.map(function(f){return f._origin}),s={name:v[0].name,color:h[0].color,checked:!0,value:v.reduce(function(f,D){return f+D.value},0)};return s});t.setState({legendData:m})}}},t.handleRef=function(r){t.node=r},t.handleLegendClick=function(r,p){var m=r;m.checked=!m.checked;var h=t.state.legendData;h[p]=m;var v=h.filter(function(s){return s.checked}).map(function(s){return s.name});t.chart&&(t.chart.filter("name",function(s){return v.indexOf("".concat(s))>-1}),t.chart.repaint()),t.setState({legendData:h})},t}return(0,x.Z)(l,[{key:"componentDidMount",value:function(){this.getLegendData()}},{key:"componentDidUpdate",value:function(d){var o=this.props.data;o!==d.data&&this.getLegendData()}},{key:"render",value:function(){var d=this,o=["#1890FF","#FACC14","#2FC25B","#8543E0","#F04864","#13C2C2","#fa8c16","#a0d911"],n=this.props,r=n.data,p=r===void 0?[]:r,m=n.height,h=m===void 0?0:m,v=n.title,s=n.hasLegend,f=s===void 0?!1:s,D=n.forceFit,ue=D===void 0?!0:D,P=n.tickCount,me=P===void 0?5:P,R=n.padding,pe=R===void 0?[35,30,16,30]:R,T=n.animate,he=T===void 0?!0:T,z=n.colors,M=z===void 0?o:z,w=this.state.legendData,ve={value:{min:0,tickCount:me}},ge=h-(f?80:22);return e.createElement("div",{className:N().radar,style:{height:h}},v&&e.createElement("h4",null,v),e.createElement(E.Chart,{scale:ve,height:ge,forceFit:ue,data:p,padding:pe,animate:he,onGetG2Instance:this.getG2Instance},e.createElement(E.Tooltip,null),e.createElement(E.Coord,{type:"polar"}),e.createElement(E.Axis,{name:"label",line:void 0,tickLine:void 0,grid:{lineStyle:{lineDash:void 0},hideFirstLine:!1}}),e.createElement(E.Axis,{name:"value",grid:{type:"polygon",lineStyle:{lineDash:void 0}}}),e.createElement(E.Geom,{type:"line",position:"label*value",color:["name",M],size:1}),e.createElement(E.Geom,{type:"point",position:"label*value",color:["name",M],shape:"circle",size:3})),f&&e.createElement(L.Z,{className:N().legend},w.map(function(C,fe){return e.createElement(k.Z,{span:24/w.length,key:C.name,onClick:function(){return d.handleLegendClick(C,fe)}},e.createElement("div",{className:N().legendItem},e.createElement("p",null,e.createElement("span",{className:N().dot,style:{backgroundColor:C.checked?C.color:"#aaa"}}),e.createElement("span",null,C.name)),e.createElement("h6",null,C.value)))})))}}]),l}(e.Component),_=V()(q),De=a(83385),ee=a(55297),te=a(49101),ae=a(84489),ne=a.n(ae),S=function(i){var l=i.links,t=i.linkElement,d=i.onAdd;return e.createElement("div",{className:ne().linkGroup},l.map(function(o){return(0,e.createElement)(t,{key:"linkGroup-item-".concat(o.id||o.title),to:o.href,href:o.href},o.title)}),e.createElement(ee.Z,{size:"small",type:"primary",ghost:!0,onClick:d},e.createElement(te.Z,null)," \u6DFB\u52A0"))};S.defaultProps={links:[],onAdd:function(){},linkElement:"a"};var re=S,oe=a(27322),c=a.n(oe),le=[{title:"\u64CD\u4F5C\u4E00",href:""},{title:"\u64CD\u4F5C\u4E8C",href:""},{title:"\u64CD\u4F5C\u4E09",href:""},{title:"\u64CD\u4F5C\u56DB",href:""},{title:"\u64CD\u4F5C\u4E94",href:""},{title:"\u64CD\u4F5C\u516D",href:""}],se=function(i){var l=i.currentUser,t=l&&Object.keys(l).length;return t?e.createElement("div",{className:c().pageHeaderContent},e.createElement("div",{className:c().avatar},e.createElement(A.C,{size:"large",src:l.avatar})),e.createElement("div",{className:c().content},e.createElement("div",{className:c().contentTitle},"\u65E9\u5B89\uFF0C",l.name,"\uFF0C\u795D\u4F60\u5F00\u5FC3\u6BCF\u4E00\u5929\uFF01"),e.createElement("div",null,l.title," |",l.group))):e.createElement(W.Z,{avatar:!0,paragraph:{rows:1},active:!0})},de=function(){return e.createElement("div",{className:c().extraContent},e.createElement("div",{className:c().statItem},e.createElement(G.Z,{title:"\u9879\u76EE\u6570",value:56})),e.createElement("div",{className:c().statItem},e.createElement(G.Z,{title:"\u56E2\u961F\u5185\u6392\u540D",value:8,suffix:"/ 24"})),e.createElement("div",{className:c().statItem},e.createElement(G.Z,{title:"\u9879\u76EE\u8BBF\u95EE",value:2223})))},ie=function(u){(0,I.Z)(l,u);var i=(0,j.Z)(l);function l(){var t;(0,b.Z)(this,l);for(var d=arguments.length,o=new Array(d),n=0;n<d;n++)o[n]=arguments[n];return t=i.call.apply(i,[this].concat(o)),t.renderActivities=function(r){var p=r.template.split(/@\{([^{}]*)\}/gi).map(function(m){return r[m]?e.createElement("a",{href:r[m].link,key:r[m].name},r[m].name):m});return e.createElement(F.ZP.Item,{key:r.id},e.createElement(F.ZP.Item.Meta,{avatar:e.createElement(A.C,{src:r.user.avatar}),title:e.createElement("span",null,e.createElement("a",{className:c().username},r.user.name),"\xA0",e.createElement("span",{className:c().event},p)),description:e.createElement("span",{className:c().datetime,title:r.updatedAt},U()(r.updatedAt).fromNow())}))},t}return(0,x.Z)(l,[{key:"componentDidMount",value:function(){var d=this.props.dispatch;d({type:"dashboardAndworkplace/init"})}},{key:"componentWillUnmount",value:function(){var d=this.props.dispatch;d({type:"dashboardAndworkplace/clear"})}},{key:"render",value:function(){var d=this,o=this.props,n=o.currentUser,r=o.activities,p=o.projectNotice,m=o.projectLoading,h=o.activitiesLoading,v=o.radarData;return!n||!n.userid?null:e.createElement(X.Z,{content:e.createElement(se,{currentUser:n}),extraContent:e.createElement(de,null)},e.createElement(L.Z,{gutter:24},e.createElement(k.Z,{xl:16,lg:24,md:24,sm:24,xs:24},e.createElement(g.Z,{className:c().projectList,style:{marginBottom:24},title:"\u8FDB\u884C\u4E2D\u7684\u9879\u76EE",bordered:!1,extra:e.createElement(Z.rU,{to:"/"},"\u5168\u90E8\u9879\u76EE"),loading:m,bodyStyle:{padding:0}},p.map(function(s){return e.createElement(g.Z.Grid,{className:c().projectGrid,key:s.id},e.createElement(g.Z,{bodyStyle:{padding:0},bordered:!1},e.createElement(g.Z.Meta,{title:e.createElement("div",{className:c().cardTitle},e.createElement(A.C,{size:"small",src:s.logo}),e.createElement(Z.rU,{to:s.href},s.title)),description:s.description}),e.createElement("div",{className:c().projectItemContent},e.createElement(Z.rU,{to:s.memberLink},s.member||""),s.updatedAt&&e.createElement("span",{className:c().datetime,title:s.updatedAt},U()(s.updatedAt).fromNow()))))})),e.createElement(g.Z,{bodyStyle:{padding:0},bordered:!1,className:c().activeCard,title:"\u52A8\u6001",loading:h},e.createElement(F.ZP,{loading:h,renderItem:function(f){return d.renderActivities(f)},dataSource:r,className:c().activitiesList,size:"large"}))),e.createElement(k.Z,{xl:8,lg:24,md:24,sm:24,xs:24},e.createElement(g.Z,{style:{marginBottom:24},title:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",bordered:!1,bodyStyle:{padding:0}},e.createElement(re,{onAdd:function(){},links:le,linkElement:Z.rU})),e.createElement(g.Z,{style:{marginBottom:24},bordered:!1,title:"XX \u6307\u6570",loading:v.length===0},e.createElement("div",{className:c().chart},e.createElement(_,{hasLegend:!0,height:343,data:v}))),e.createElement(g.Z,{bodyStyle:{paddingTop:12,paddingBottom:12},bordered:!1,title:"\u56E2\u961F",loading:m},e.createElement("div",{className:c().members},e.createElement(L.Z,{gutter:48},p.map(function(s){return e.createElement(k.Z,{span:12,key:"members-item-".concat(s.id)},e.createElement(Z.rU,{to:s.href},e.createElement(A.C,{src:s.logo,size:"small"}),e.createElement("span",{className:c().member},s.member)))})))))))}}]),l}(e.Component),ce=(0,O.$j)(function(u){var i=u.dashboardAndworkplace,l=i.currentUser,t=i.projectNotice,d=i.activities,o=i.radarData,n=u.loading;return{currentUser:l,projectNotice:t,activities:d,radarData:o,currentUserLoading:n.effects["dashboardAndworkplace/fetchUserCurrent"],projectLoading:n.effects["dashboardAndworkplace/fetchProjectNotice"],activitiesLoading:n.effects["dashboardAndworkplace/fetchActivitiesList"]}})(ie)}}]);
